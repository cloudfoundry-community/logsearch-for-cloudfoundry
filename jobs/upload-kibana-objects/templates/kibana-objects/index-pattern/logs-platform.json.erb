<% 

require 'json' 

#########################
## -- Common fields -- ##
#########################
fields_json =
  [
    {"name":"_id","type":"string","count":0,"scripted":false,"indexed":false,"analyzed":false,"doc_values":false},
    {"name":"_type","type":"string","count":0,"scripted":false,"indexed":false,"analyzed":false,"doc_values":false},
    {"name":"_score","type":"number","count":0,"scripted":false,"indexed":false,"analyzed":false,"doc_values":false},
    {"name":"_source","type":"_source","count":0,"scripted":false,"indexed":false,"analyzed":false,"doc_values":false},
    {"name":"_index","type":"string","count":0,"scripted":false,"indexed":false,"analyzed":false,"doc_values":false},
    
    {"name":"tags","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},

    {"name":"@input","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@input.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@index_type","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@index_type.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@type","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@type.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},

    {"name":"@timestamp","type":"date","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@message","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@level","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@level.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},

    {"name":"@shipper.name","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@shipper.name.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@shipper.priority","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},

    {"name":"@source.deployment","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@source.deployment.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@source.host","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@source.host.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@source.job","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@source.job.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@source.job_index","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@source.job_index.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@source.component","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@source.component.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"@source.type","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"@source.type.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true}
  ]

###########################
## -- Platform fields -- ##
###########################
fields_json.concat(
  [   
    {"name":"uaa.timestamp","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.pid","type":"number","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"uaa.thread","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.log_category","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.audit.identity_zone_id","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"uaa.audit.data","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.audit.origin","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.audit.remote_address","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.audit.type","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"uaa.audit.principal","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    
    {"name":"haproxy.accept_date","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.time_backend_connect","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.frontend_name","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.retries","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.srv_queue","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.captured_response_cookie","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.termination_state","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.bytes_read","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.time_backend_response","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.backend_name","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.feconn","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.http_request","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.client_port","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.http_status_code","type":"number","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"haproxy.http_request_verb","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.http_request_verb.raw","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"haproxy.server_name","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.actconn","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.time_duration","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.captured_request_cookie","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.srvconn","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.backend_queue","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.client_ip","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.beconn","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.time_request","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.time_queue","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"haproxy.bind_name","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    
    {"name":"geoip.location","type":"geo_point","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"geoip.timezone","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"geoip.longitude","type":"number","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"geoip.latitude","type":"number","count":0,"scripted":false,"indexed":true,"analyzed":false,"doc_values":true},
    {"name":"geoip.continent_code","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"geoip.ip","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"geoip.country_code3","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"geoip.country_code2","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false},
    {"name":"geoip.country_name","type":"string","count":0,"scripted":false,"indexed":true,"analyzed":true,"doc_values":false}
  ]
)
%>
{
  "title": "logs-platform-*",
  "timeFieldName": "@timestamp",
  "fields": "<%= fields_json.to_json.gsub(/"/) { '\"' } %>"
}
