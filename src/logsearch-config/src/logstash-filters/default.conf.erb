# All logs start being sent to the unparsed index.  
# The filters below will route them to the @index=app or @index=platform
if ! [@metadata][index] {
    mutate {
        add_field => { "[@metadata][index]" => "unparsed" }
    }
}

<%= File.read('src/logstash-filters/snippets/firehose.conf') %>
<%= File.read('src/logstash-filters/snippets/uaa.conf') %>
<%= File.read('src/logstash-filters/snippets/vcap.conf') %>

#Cleanup
mutate {
  remove_field => [ "@version" ]
}
